import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs'
import { ChatContainer } from './index'

<Meta title="IM UI Kit/聊天组件" />

# 聊天组件

聊天组件负责用户间消息传递、消息展示、聊天控制等功能。提供了聊天输入框、聊天内容展示和控制、聊天设置等。

- 聊天输入框

  1. 发送消息
  2. 发送表情
  3. 发送图片
  4. 发送文件

- 聊天内容展示和控制

  1. 聊天消息展示、好友资料展示
  2. 聊天消息撤回、删除、重新编辑
  3. 聊天好友拉黑/解除拉黑、删除/添加

- 聊天设置

  1. 单聊设置，创建群聊
  2. 群聊设置，群解散/群退出、群资料展示与修改、群成员添加/移除、群权限设置等

## 参数说明

<ArgsTable of={ChatContainer} />

## 内部状态

Chat Kit 提供了自己的上下文 `ChatContext`，您可以通过 `useStateContext` hooks 函数访问内部状态。

### 详细说明

| 返回值                  | 类型        | 说明                           |
| ----------------------- | ----------- | ------------------------------ |
| messages                | ObjectArray | 选中会话的聊天消息列表         |
| memberList              | ObjectArray | 单聊/群聊成员列表              |
| managers                | ObjectArray | 群聊管理员列表                 |
| muted                   | Boolean     | 群禁言状态                     |
| msgNoData               | Boolean     | 历史消息是否无数据状态         |
| msgLoading              | Boolean     | 历史消息 loading 状态          |
| notExitTeamAccounts     | StringArray | 不在群成员列表中的用户 id 列表 |
| notExitTeamAccountsInfo | ObjectArray | 不在群成员列表中的用户信息列表 |
| uploadImageLoading      | Boolean     | 上传图片 loading 状态          |
| uploadFileLoading       | Boolean     | 上传文件 loading 状态          |

### 代码示例

```tsx
import React from 'react'
import { useChatStateContext } from '@xkit-yx/im-kit-ui'

const Page = () => {
  const { chatState } = useChatStateContext()

  console.log(chatState)

  return <div>……</div>
}
```

## 代码示例

```tsx
import React from 'react'
import { ChatContainer, ChatProvider } from '@xkit-yx/im-kit-ui'

import '@xkit-yx/im-kit-ui/es/style'

const Page1 = () => {
  return (
    <div style={{ width: '100vw', height: '100vh' }}>
      <ChatProvider>
        <ChatContainer />
      </ChatProvider>
    </div>
  )
}
```
