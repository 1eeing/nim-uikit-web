import { Canvas, Meta, Story } from '@storybook/addon-docs'

<Meta title="IM UI Kit/连接相关" />

# 连接相关

一般来说，当开发者需要连接或断开连接 IM 时，只需要渲染或销毁 Provider 即可。当 Provider 渲染和销毁时，内部会完成云信 IM 的连接和断开连接，无需开发者关心。

如果开发者需要手动触发连接和断开连接，可以参考下文。

## 连接

通过 IM UI Kit 提供的 hooks 函数，可以拿到 nim 对象。通过 `nim.connect()` 可以手动连接 IM。

## 断开连接

跟连接时一样，通过 IM UI Kit 提供的 hooks 函数，可以拿到 nim 对象。通过 `nim.disconnect()` 可以手动断开 IM 的连接。

## 代码示例

```tsx
import React from 'react'
import { useStateContext } from '@xkit-yx/im-kit-ui'

const Page1 = () => {
  const { nim } = useStateContext()

  const handleConnect = () => {
    nim.connect().then(() => {
      console.log('连接成功')
    })
  }

  const handleDisconnect = () => {
    nim.disconnect().then(() => {
      console.log('断开连接成功')
    })
  }

  return (
    <div>
      <Button onClick={handleConnect}>连接</Button>
      <Button onClick={handleDisconnect}>断开连接</Button>
    </div
  )
}
```
